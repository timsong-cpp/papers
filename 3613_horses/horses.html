<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="mpark/wg21" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2025-02-05" />
  <title>On the beating of horses, and other matters</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f6f8fa; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span. { } /* Normal */
      code span.al { color: #ff0000; } /* Alert */
      code span.an { } /* Annotation */
      code span.at { } /* Attribute */
      code span.bn { color: #9f6807; } /* BaseN */
      code span.bu { color: #9f6807; } /* BuiltIn */
      code span.cf { color: #00607c; } /* ControlFlow */
      code span.ch { color: #9f6807; } /* Char */
      code span.cn { } /* Constant */
      code span.co { color: #008000; font-style: italic; } /* Comment */
      code span.cv { color: #008000; font-style: italic; } /* CommentVar */
      code span.do { color: #008000; } /* Documentation */
      code span.dt { color: #00607c; } /* DataType */
      code span.dv { color: #9f6807; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #9f6807; } /* Float */
      code span.fu { } /* Function */
      code span.im { } /* Import */
      code span.in { color: #008000; } /* Information */
      code span.kw { color: #00607c; } /* Keyword */
      code span.op { color: #af1915; } /* Operator */
      code span.ot { } /* Other */
      code span.pp { color: #6f4e37; } /* Preprocessor */
      code span.re { } /* RegionMarker */
      code span.sc { color: #9f6807; } /* SpecialChar */
      code span.ss { color: #9f6807; } /* SpecialString */
      code span.st { color: #9f6807; } /* String */
      code span.va { } /* Variable */
      code span.vs { color: #9f6807; } /* VerbatimString */
      code span.wa { color: #008000; font-weight: bold; } /* Warning */
      code.diff {color: #898887}
      code.diff span.va {color: #006e28}
      code.diff span.st {color: #bf0303}
  </style>
  <style type="text/css">
body {
margin: 5em;
font-family: serif;

hyphens: auto;
line-height: 1.35;
}
div.wrapper {
max-width: 60em;
margin: auto;
}
ul {
list-style-type: none;
padding-left: 2em;
margin-top: -0.2em;
margin-bottom: -0.2em;
}
a {
text-decoration: none;
color: #4183C4;
}
a.hidden_link {
text-decoration: none;
color: inherit;
}
li {
margin-top: 0.6em;
margin-bottom: 0.6em;
}
h1, h2, h3, h4 {
position: relative;
line-height: 1;
}
a.self-link {
position: absolute;
top: 0;
left: calc(-1 * (3.5rem - 26px));
width: calc(3.5rem - 26px);
height: 2em;
text-align: center;
border: none;
transition: opacity .2s;
opacity: .5;
font-family: sans-serif;
font-weight: normal;
font-size: 83%;
}
a.self-link:hover { opacity: 1; }
a.self-link::before { content: "§"; }
ul > li:before {
content: "\2014";
position: absolute;
margin-left: -1.5em;
}
:target { background-color: #C9FBC9; }
:target .codeblock { background-color: #C9FBC9; }
:target ul { background-color: #C9FBC9; }
.abbr_ref { float: right; }
.folded_abbr_ref { float: right; }
:target .folded_abbr_ref { display: none; }
:target .unfolded_abbr_ref { float: right; display: inherit; }
.unfolded_abbr_ref { display: none; }
.secnum { display: inline-block; min-width: 35pt; }
.header-section-number { display: inline-block; min-width: 35pt; }
.annexnum { display: block; }
div.sourceLinkParent {
float: right;
}
a.sourceLink {
position: absolute;
opacity: 0;
margin-left: 10pt;
}
a.sourceLink:hover {
opacity: 1;
}
a.itemDeclLink {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
opacity: 0;
}
a.itemDeclLink:hover { opacity: 1; }
span.marginalizedparent {
position: relative;
left: -5em;
}
li span.marginalizedparent { left: -7em; }
li ul > li span.marginalizedparent { left: -9em; }
li ul > li ul > li span.marginalizedparent { left: -11em; }
li ul > li ul > li ul > li span.marginalizedparent { left: -13em; }
div.footnoteNumberParent {
position: relative;
left: -4.7em;
}
a.marginalized {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
}
a.enumerated_item_num {
position: relative;
left: -3.5em;
display: inline-block;
margin-right: -3em;
text-align: right;
width: 3em;
}
div.para { margin-bottom: 0.6em; margin-top: 0.6em; text-align: justify; }
div.section { text-align: justify; }
div.sentence { display: inline; }
span.indexparent {
display: inline;
position: relative;
float: right;
right: -1em;
}
a.index {
position: absolute;
display: none;
}
a.index:before { content: "⟵"; }

a.index:target {
display: inline;
}
.indexitems {
margin-left: 2em;
text-indent: -2em;
}
div.itemdescr {
margin-left: 3em;
}
.bnf {
font-family: serif;
margin-left: 40pt;
margin-top: 0.5em;
margin-bottom: 0.5em;
}
.ncbnf {
font-family: serif;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
}
.ncsimplebnf {
font-family: serif;
font-style: italic;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
background: inherit; 
}
span.textnormal {
font-style: normal;
font-family: serif;
white-space: normal;
display: inline-block;
}
span.rlap {
display: inline-block;
width: 0px;
}
span.descr { font-style: normal; font-family: serif; }
span.grammarterm { font-style: italic; }
span.term { font-style: italic; }
span.terminal { font-family: monospace; font-style: normal; }
span.nonterminal { font-style: italic; }
span.tcode { font-family: monospace; font-style: normal; }
span.textbf { font-weight: bold; }
span.textsc { font-variant: small-caps; }
a.nontermdef { font-style: italic; font-family: serif; }
span.emph { font-style: italic; }
span.techterm { font-style: italic; }
span.mathit { font-style: italic; }
span.mathsf { font-family: sans-serif; }
span.mathrm { font-family: serif; font-style: normal; }
span.textrm { font-family: serif; }
span.textsl { font-style: italic; }
span.mathtt { font-family: monospace; font-style: normal; }
span.mbox { font-family: serif; font-style: normal; }
span.ungap { display: inline-block; width: 2pt; }
span.textit { font-style: italic; }
span.texttt { font-family: monospace; }
span.tcode_in_codeblock { font-family: monospace; font-style: normal; }
span.phantom { color: white; }

span.math { font-style: normal; }
span.mathblock {
display: block;
margin-left: auto;
margin-right: auto;
margin-top: 1.2em;
margin-bottom: 1.2em;
text-align: center;
}
span.mathalpha {
font-style: italic;
}
span.synopsis {
font-weight: bold;
margin-top: 0.5em;
display: block;
}
span.definition {
font-weight: bold;
display: block;
}
.codeblock {
margin-left: 1.2em;
line-height: 127%;
}
.outputblock {
margin-left: 1.2em;
line-height: 127%;
}
div.itemdecl {
margin-top: 2ex;
}
code.itemdeclcode {
white-space: pre;
display: block;
}
span.textsuperscript {
vertical-align: super;
font-size: smaller;
line-height: 0;
}
.footnotenum { vertical-align: super; font-size: smaller; line-height: 0; }
.footnote {
font-size: small;
margin-left: 2em;
margin-right: 2em;
margin-top: 0.6em;
margin-bottom: 0.6em;
}
div.minipage {
display: inline-block;
margin-right: 3em;
}
div.numberedTable {
text-align: center;
margin: 2em;
}
div.figure {
text-align: center;
margin: 2em;
}
table {
border: 1px solid black;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
margin-top: 0.8em;
text-align: left;
hyphens: none; 
}
td, th {
padding-left: 1em;
padding-right: 1em;
vertical-align: top;
}
td.empty {
padding: 0px;
padding-left: 1px;
}
td.left {
text-align: left;
}
td.right {
text-align: right;
}
td.center {
text-align: center;
}
td.justify {
text-align: justify;
}
td.border {
border-left: 1px solid black;
}
tr.rowsep, td.cline {
border-top: 1px solid black;
}
tr.even, tr.odd {
border-bottom: 1px solid black;
}
tr.capsep {
border-top: 3px solid black;
border-top-style: double;
}
tr.header {
border-bottom: 3px solid black;
border-bottom-style: double;
}
th {
border-bottom: 1px solid black;
}
span.centry {
font-weight: bold;
}
div.table {
display: block;
margin-left: auto;
margin-right: auto;
text-align: center;
width: 90%;
}
span.indented {
display: block;
margin-left: 2em;
margin-bottom: 1em;
margin-top: 1em;
}
ol.enumeratea { list-style-type: none; background: inherit; }
ol.enumerate { list-style-type: none; background: inherit; }

code.sourceCode > span { display: inline; }
</style>
  <style type="text/css">a {
color : #4183C4;
text-decoration: underline;
}
a.marginalized {
text-decoration: none;
}
a.self-link {
text-decoration: none;
}
h1#toctitle {
border-bottom: 1px solid #cccccc;
}
#TOC li {
margin-top: 1px;
margin-bottom: 1px;
}
#TOC ul>li:before { display: none; }
h3.subtitle { margin-top: -15px; }
h1:target { background-color: transparent; }
h2:target { background-color: transparent; }
h3:target { background-color: transparent; }
h4:target { background-color: transparent; }
h5:target { background-color: transparent; }
h6:target { background-color: transparent; }
.marginalized:target { background-color: transparent; }
code span.co { font-family: monospace; }
table tr {
background-color: white;
}
table tr:nth-child(2n) {
background-color: #f6f8fa;
}
#title-block-header > table tr:nth-child(2n) {
background-color: white;
}
td > div.sourceCode {
background-color: inherit;
}
table {
border-collapse: collapse;
}
table td, table th {
border: 1px solid #cccccc;
}
table th {
border-bottom: 1px solid black;
text-align: center;
}
table tr:first-child th {
border-top: 0;
}
table tr:last-child td {
border-bottom: 0;
}
table tr td:first-child,
table tr th:first-child {
border-left: 0;
}
table tr td:last-child,
table tr th:last-child {
border-right: 0;
}
table tbody tr:first-child td {
border-top: 1px solid black;
}
#title-block-header td { border: 0; }
@media all {
body {
margin: 2em;
}
}
@media screen and (min-width: 480px) {
body {
margin: 5em;
}
}
#refs code{padding-left: 0px; text-indent: 0px;}
:root {
--diff-ins: #e6ffed;
--diff-strongins: #acf2bd;
--diff-del: #ffdddd;
--diff-strongdel: #ff8888;
}
span.diffins {
background-color: var(--diff-strongins);
}
span.diffdel {
background-color: var(--diff-strongdel);
}
div.rm { text-decoration: line-through; }
div.rm code.sourceCode { text-decoration: line-through; }
div.addu, span.addu {
color: #006e28;
background-color: var(--diff-ins);
}

div.rm pre, div.add pre { background-color: #f6f8fa; }
div.addu pre { background-color: var(--diff-ins); }
div.add, div.add pre, div.add blockquote { background-color: var(--diff-ins); }
div.addu blockquote {
border-left: 4px solid #00a000;
padding: 0 15px;
color: #006e28;
text-decoration: none;
}
div.addu blockquote code.sourceCode { text-decoration: none; }
div.addu blockquote pre { text-decoration: none; }
div.addu blockquote pre code { text-decoration: none; }
code.diff span.va { color: #000000; background-color: var(--diff-ins); }
code.diff span.st { color: #000000; background-color: var(--diff-del); }
blockquote { background-color: #f6f8fa; }
div.quote {
text-align: right;
font-style: italic;
}
span.red {
color: #FF0000
}
@media (prefers-color-scheme: dark) {
:root {
--diff-ins: #225522;
--diff-strongins: #225522;
--diff-del: #662222;
--diff-strongdel: #662222;
}
body {
background-color: #171717;
color: #b0b0b0;
}
table tr {
background-color: #171717;
}
table tr:nth-child(2n) {
background-color: #252525;
}
#title-block-header > table tr:nth-child(2n) {
background-color: #171717;
}
tr.header {
border-bottom: 3px solid #b0b0b0;
border-bottom-style: double;
}
tr.even, tr.odd {
border-bottom: 1px solid #b0b0b0;
}
table th {
border-bottom: 1px solid #b0b0b0;
}
table tbody tr:first-child td {
border-top: 1px solid #b0b0b0;
}
blockquote { background-color: rgba(255, 255, 255, .03); }
a { color: #549df2; }
div.sourceCode
{ background-color: rgba(255, 255, 255, .03); }
table { border-color: #b0b0b0; }
td.border { border-color: #b0b0b0; }
td.border { border-left-color: #b0b0b0; }
tr.rowsep, td.cline { border-top-color: #b0b0b0; }
tr.capsep { border-top-color: #b0b0b0; }
th { border-bottom-color: #b0b0b0; }
code span.kw { color: #12cabe; }
code span.cf { color: #12cabe; }
code span.op { color: #cf1915; }
code span.pp { color: #b27c58; }
code span.co { color: #35ba00; }
code.diff span.va {
color: #b0b0b0;
}
code.diff span.vd {
color: #b0b0b0;
}
code.diff span.st {
color: #b0b0b0;
}
div.add {
color: #d0fddd !important
}
div.rm {
color: #8f3131 !important
}
div.rm pre, div.add pre { background-color: rgba(255, 255, 255, .03); }
:target { background-color: #225522; }
}
</style>
  <link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAVoJEAN6CRADegkQAWIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wCCRAAAgkQAAIJEAACCRAAsgkQAvoJEAP+CRAD/gkQA/4JEAP+CRADAgkQALoJEAACCRAAAgkQAAP///wD///8AgkQAAIJEABSCRACSgkQA/IJEAP99PQD/dzMA/3czAP99PQD/gkQA/4JEAPyCRACUgkQAFIJEAAD///8A////AHw+AFiBQwDqgkQA/4BBAP9/PxP/uZd6/9rJtf/bybX/upd7/39AFP+AQQD/gkQA/4FDAOqAQgBc////AP///wDKklv4jlEa/3o7AP+PWC//8+3o///////////////////////z7un/kFox/35AAP+GRwD/mVYA+v///wD///8A0Zpk+NmibP+0d0T/8evj///////+/fv/1sKz/9bCs//9/fr//////+/m2/+NRwL/nloA/5xYAPj///8A////ANKaZPjRmGH/5cKh////////////k149/3UwAP91MQD/lmQ//86rhv+USg3/m1YA/5hSAP+bVgD4////AP///wDSmmT4zpJY/+/bx///////8+TV/8mLT/+TVx//gkIA/5lVAP+VTAD/x6B//7aEVv/JpH7/s39J+P///wD///8A0ppk+M6SWP/u2sf///////Pj1f/Nj1T/2KFs/8mOUv+eWhD/lEsA/8aee/+0glT/x6F7/7J8Rvj///8A////ANKaZPjRmGH/48Cf///////+/v7/2qt//82PVP/OkFX/37KJ/86siv+USg7/mVQA/5hRAP+bVgD4////AP///wDSmmT40ppk/9CVXP/69O////////7+/v/x4M//8d/P//7+/f//////9u7n/6tnJf+XUgD/nFgA+P///wD///8A0ppk+NKaZP/RmWL/1qNy//r07///////////////////////+vXw/9akdP/Wnmn/y5FY/6JfFvj///8A////ANKaZFTSmmTo0ppk/9GYYv/Ql1//5cWm//Hg0P/x4ND/5cWm/9GXYP/RmGH/0ppk/9KaZOjVnmpY////AP///wDSmmQA0ppkEtKaZI7SmmT60ppk/9CWX//OkVb/zpFW/9CWX//SmmT/0ppk/NKaZJDSmmQS0ppkAP///wD///8A0ppkANKaZADSmmQA0ppkKtKaZLrSmmT/0ppk/9KaZP/SmmT/0ppkvNKaZCrSmmQA0ppkANKaZAD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkUtKaZNzSmmTc0ppkVNKaZADSmmQA0ppkANKaZADSmmQA////AP5/AAD4HwAA4AcAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAMADAADgBwAA+B8AAP5/AAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAyCRACMgkQA6oJEAOqCRACQgkQAEIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRABigkQA5oJEAP+CRAD/gkQA/4JEAP+CRADqgkQAZoJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAA4gkQAwoJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQAxIJEADyCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAP///wD///8A////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAWgkQAmIJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAJyCRAAYgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAdIJEAPCCRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAPSCRAB4gkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQASoJEANKCRAD/gkQA/4JEAP+CRAD/g0YA/39AAP9zLgD/bSQA/2shAP9rIQD/bSQA/3MuAP9/PwD/g0YA/4JEAP+CRAD/gkQA/4JEAP+CRADUgkQAToJEAACCRAAAgkQAAP///wD///8A////AP///wB+PwAAgkUAIoJEAKiCRAD/gkQA/4JEAP+CRAD/hEcA/4BBAP9sIwD/dTAA/5RfKv+viF7/vp56/76ee/+wiF7/lWAr/3YxAP9sIwD/f0AA/4RHAP+CRAD/gkQA/4JEAP+CRAD/gkQArIJEACaBQwAA////AP///wD///8A////AIBCAEBzNAD6f0EA/4NFAP+CRAD/gkQA/4VIAP92MwD/bSUA/6N1Tv/ezsL/////////////////////////////////38/D/6V3Uv9uJgD/dTEA/4VJAP+CRAD/gkQA/4JEAP+BQwD/fUAA/4FDAEj///8A////AP///wD///8AzJRd5qBlKf91NgD/dDUA/4JEAP+FSQD/cy4A/3YyAP/PuKP//////////////////////////////////////////////////////9K7qP94NQD/ciwA/4VJAP+CRAD/fkEA/35BAP+LSwD/mlYA6v///wD///8A////AP///wDdpnL/4qx3/8KJUv+PUhf/cTMA/3AsAP90LgD/4dK+/////////////////////////////////////////////////////////////////+TYxf91MAD/dTIA/31CAP+GRwD/llQA/6FcAP+gWwD8////AP///wD///8A////ANGZY/LSm2X/4ap3/92mcP+wdT3/byQA/8mwj////////////////////////////////////////////////////////////////////////////+LYxv9zLgP/jUoA/59bAP+hXAD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/RmWL/1p9q/9ubXv/XqXj////////////////////////////7+fD/vZyG/6BxS/+gcUr/vJuE//r37f//////////////////////3MOr/5dQBf+dVQD/nVkA/5xYAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmWP/yohJ//jo2P//////////////////////4NTG/4JDFf9lGAD/bSQA/20kAP9kGAD/fz8S/+Xb0f//////5NG9/6txN/+LOgD/m1QA/51aAP+cWAD/m1cA/5xYAP+cWADy////AP///wD///8A////ANKaZPLSmmT/0ppk/8+TWf/Unmv//v37//////////////////////+TWRr/VwsA/35AAP+ERgD/g0UA/4JGAP9lHgD/kFga/8KXX/+TRwD/jT4A/49CAP+VTQD/n10A/5xYAP+OQQD/lk4A/55cAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/y4tO/92yiP//////////////////////8NnE/8eCQP+rcTT/ez0A/3IyAP98PgD/gEMA/5FSAP+USwD/jj8A/5lUAP+JNwD/yqV2/694Mf+HNQD/jkAA/82rf/+laBj/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/LiUr/4byY///////////////////////gupX/0I5P/+Wuev/Lklz/l1sj/308AP+QSwD/ol0A/59aAP+aVQD/k0oA/8yoh///////+fXv/6pwO//Lp3v///////Pr4f+oay7y////AP///wD///8A////ANKaZPLSmmT/0ppk/8uJSv/hvJj//////////////////////+G7l//Jhkb/0ppk/96nc//fqXX/x4xO/6dkFP+QSQD/llEA/5xXAP+USgD/yaOA///////38uv/qG05/8ijdv//////8efb/6ZpLPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/zIxO/9yxh///////////////////////7dbA/8iEQf/Sm2X/0Zlj/9ScZv/eqHf/2KJv/7yAQf+XTgD/iToA/5lSAP+JNgD/yKFv/611LP+HNQD/jT8A/8qmeP+kZRT/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/Pk1n/1J5q//78+//////////////////+/fv/1aFv/8iEQv/Tm2b/0ppl/9GZY//Wn2z/1pZc/9eldf/Bl2b/kUcA/4w9AP+OQAD/lUwA/59eAP+cWQD/jT8A/5ZOAP+eXADy////AP///wD///8A////ANKaZPLSmmT/0ppk/9KZY//KiEn/8d/P///////////////////////47+f/05tm/8iCP//KiEj/yohJ/8eCP//RmGH//vfy///////n1sP/rXQ7/4k4AP+TTAD/nVoA/5xYAP+cVwD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/0ptl/8uLTf/aq37////////////////////////////+/fz/6c2y/961jv/etY7/6Myx//78+v//////////////////////3MWv/5xXD/+ORAD/mFQA/51ZAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmmT/0ppk/8mFRP/s1b//////////////////////////////////////////////////////////////////////////////+PD/0JFU/7NzMv+WUQD/kUsA/5tXAP+dWQDy////AP///wD///8A////ANKaZP/SmmT/0ppk/9KaZP/Sm2X/z5NZ/8yMT//z5NX/////////////////////////////////////////////////////////////////9Ofa/8yNUP/UmGH/36p5/8yTWv+qaSD/kksA/5ROAPz///8A////AP///wD///8A0ppk5NKaZP/SmmT/0ppk/9KaZP/TnGf/zY9T/82OUv/t1sD//////////////////////////////////////////////////////+7Yw//OkFX/zI5R/9OcZ//SmmP/26V0/9ymdf/BhUf/ol8R6P///wD///8A////AP///wDSmmQ80ppk9tKaZP/SmmT/0ppk/9KaZP/TnGj/zpFW/8qJSv/dson/8uHS//////////////////////////////////Lj0//etIv/y4lL/86QVf/TnGj/0ppk/9KaZP/RmWP/05xn/9ymdfjUnWdC////AP///wD///8A////ANKaZADSmmQc0ppkotKaZP/SmmT/0ppk/9KaZP/Tm2b/0Zli/8qJSf/NjlH/16Z3/+G8mP/myKr/5siq/+G8mP/Xp3f/zY5S/8qISf/RmGH/05tm/9KaZP/SmmT/0ppk/9KaZP/SmmSm0pljINWdaQD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkQtKaZMrSmmT/0ppk/9KaZP/SmmT/0ptl/9GYYf/Nj1P/y4lL/8qISP/KiEj/y4lK/82PU//RmGH/0ptl/9KaZP/SmmT/0ppk/9KaZP/SmmTO0ppkRtKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZGzSmmTu0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmTw0ppkcNKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZBLSmmSQ0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppklNKaZBTSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQy0ppkutKaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppkvtKaZDbSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkXNKaZODSmmT/0ppk/9KaZP/SmmT/0ppk5NKaZGDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkBtKaZIbSmmTo0ppk6tKaZIrSmmQK0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP/8P///+B///+AH//+AAf//AAD//AAAP/AAAA/gAAAHwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA+AAAAfwAAAP/AAAP/8AAP//gAH//+AH///4H////D//" rel="icon" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  
</head>
<body>
<div class="wrapper">
<header id="title-block-header">
<h1 class="title" style="text-align:center">On the beating of horses, and other matters</h1>

<table style="border:none;float:right">
  <tr>
    <td>Document #:</td>
    <td>D3613R0</td>
  </tr>
  <tr>
    <td>Date:</td>
    <td>2025-02-05</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Project:</td>
    <td>Programming Language C++</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Audience:</td>
    <td>
      SG9<br>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top">Reply-to:</td>
    <td>
      Tim Song<br>&lt;<a href="mailto:t.canens.cpp@gmail.com" class="email">t.canens.cpp@gmail.com</a>&gt;<br>
    </td>
  </tr>
</table>

</header>
<div style="clear:both">
<div class="quote">
<p><br /> quo usque tandem abutere, Catilina, patientia nostra?<br /> quam diu etiam furor iste tuus nos eludet?<br /> quem ad finem sese effrenata iactabit audacia?</p>
<p>— Cicero, In Catilinam I</p>
</div>
<h1 data-number="1" style="border-bottom:1px solid #cccccc" id="introduction"><span class="header-section-number">1</span> Introduction<a href="#introduction" class="self-link"></a></h1>
<p>We should not beat horses. Dead or otherwise.</p>
<p>But sometimes a horse is in need of a course correction and need some gentle or not-so-gentle persuasion. The best time to do that is when the horse is still alive.</p>
<p>This is C++ though, where we have time travel and can DR a seemingly dead horse back to life. So the second-best time to do that is when it is just dead, as shown in <a href="https://upload.wikimedia.org/wikipedia/commons/e/e8/Man_sitting_on_a_dead_horse_%281876_-_1884%29_%28retouched%29.jpg">this photo</a> taken in the late 19th century.</p>
<p>We have, in fact, done this for the ranges library, soon after we shipped it in C++20. See, e.g., <span class="citation" data-cites="P2017R1">[<a href="#ref-P2017R1" role="doc-biblioref">P2017R1</a>]</span><span class="citation" data-cites="P2210R2">[<a href="#ref-P2210R2" role="doc-biblioref">P2210R2</a>]</span><span class="citation" data-cites="P2325R3">[<a href="#ref-P2325R3" role="doc-biblioref">P2325R3</a>]</span><span class="citation" data-cites="P2328R1">[<a href="#ref-P2328R1" role="doc-biblioref">P2328R1</a>]</span><span class="citation" data-cites="P2415R2">[<a href="#ref-P2415R2" role="doc-biblioref">P2415R2</a>]</span><span class="citation" data-cites="P2432R1">[<a href="#ref-P2432R1" role="doc-biblioref">P2432R1</a>]</span>. And we have continued to patch up minor issues since then, see, e.g., <span class="citation" data-cites="P2602R2">[<a href="#ref-P2602R2" role="doc-biblioref">P2602R2</a>]</span><span class="citation" data-cites="P2609R3">[<a href="#ref-P2609R3" role="doc-biblioref">P2609R3</a>]</span><span class="citation" data-cites="P2997R1">[<a href="#ref-P2997R1" role="doc-biblioref">P2997R1</a>]</span>.</p>
<p>What we should not do, though, is descending upon that same crossing (which now looks <a href="https://maps.app.goo.gl/y9MmRTia1unEb6YX9">like this</a>), more than a century later, in search of that horse so that we can give it another good beating.</p>
<p>Yet it appears <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span> wants to do just that. This paper is an attempt<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to explain that the horse has already been thoroughly beaten and we should <a href="https://en.wikipedia.org/wiki/Wikipedia:Drop_the_stick_and_back_slowly_away_from_the_horse_carcass">drop our sticks and back slowly away from the imaginary horse carcass</a>.</p>
<h1 data-number="2" style="border-bottom:1px solid #cccccc" id="filter-and-mutating-elements"><span class="header-section-number">2</span> <code class="sourceCode cpp">filter</code> and mutating elements<a href="#filter-and-mutating-elements" class="self-link"></a></h1>
<p>Let’s start from some basics.</p>
<p>One of the defining characteristics – perhaps <em>the</em> defining characteristic – of forward iterators is that they are multi-pass.</p>
<p>What does multi-pass mean? <span>24.3.4.11 <a href="https://eel.is/c++draft/iterator.concept.forward">[iterator.concept.forward]</a></span> p4 explains:</p>
<blockquote>
<p><span class="marginalizedparent"><a class="marginalized" href="#pnum_1" id="pnum_1">4</a></span> Two dereferenceable iterators <code class="sourceCode cpp">a</code> and <code class="sourceCode cpp">b</code> of type <code class="sourceCode cpp">X</code> offer the <em>multi-pass guarantee</em> if</p>
<ul>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_2" id="pnum_2">(4.1)</a></span> <code class="sourceCode cpp">a <span class="op">==</span> b</code> implies <code class="sourceCode cpp"><span class="op">++</span>a <span class="op">==</span> <span class="op">++</span>b</code> and</li>
<li><span class="marginalizedparent"><a class="marginalized" href="#pnum_3" id="pnum_3">(4.2)</a></span> the expression <code class="sourceCode cpp"><span class="op">((</span><span class="dt">void</span><span class="op">)[](</span>X x<span class="op">){++</span>x;<span class="op">}(</span>a<span class="op">)</span>, <span class="op">*</span>a<span class="op">)</span></code> is equivalent to the expression <code class="sourceCode cpp"><span class="op">*</span>a</code>.</li>
</ul>
</blockquote>
<p>In human-readable terms, this means that you can iterate through the range multiple times and get the same things back each time.</p>
<p>This is not new to the C++20 ranges design. <span>24.3.5.5 <a href="https://eel.is/c++draft/forward.iterators">[forward.iterators]</a></span>, which specifies the pre-C++20 forward iterators and has its origins in the original STL, has essentially the same definition.</p>
<p>Can <em>any</em> lazy filter range – regardless of the implementation – possibly meet that requirement if elements are mutated in a way that changes what the predicate returns?</p>
<p>No. A lazy range must defer the evaluation of the predicate until the point of iteration, so it can’t preemptively <em>cache</em> (dare I say that word?) which elements are in the range. It has to evaluate the predicate when it gets there, and so if the element has been mutated so as to change the result of the predicate, then iterating through the range twice will produce different answers.</p>
<p>If I iterate through a range once and see four elements, and then I iterate through it again and only see two, then, by definition, that is not a multi-pass range.</p>
<p>A lazy filter view cannot both be forward and yet allow arbitrary mutation. <em>That is fundamental to the nature of the algorithm.</em> As has been pointed out many times.</p>
<p>So what can we do? Well, there are not a lot of options.</p>
<ul>
<li>We can say that the view is input and not provide the multi-pass guarantee. That disallows whole families of algorithms.</li>
<li>We can disallow mutations altogether – say, by effectively adding a <code class="sourceCode cpp">views<span class="op">::</span>as_const</code>. That disallows a variety of entirely sound code and <a href="https://brevzin.github.io/c++/2023/04/25/mutating-filter/#whose-fault-is-it">isn’t bullet-proof either</a>.</li>
<li>We can allow mutations in general, but disallow it – on pain of undefined behavior – if that would change the result of the predicate and cause us to fail to provide the multipass guarantee despite advertising so.</li>
</ul>
<p>The standard picked the last option. It makes <code class="sourceCode cpp">filter</code> as powerful as it can possibly be, within the fundamental constraints imposed by the definition of forward iterators. Implementations can opt to add debug checks that catch a good fraction of misuses, too – though it won’t be all of them.</p>
<p>Now that we have <code class="sourceCode cpp">views<span class="op">::</span>as_const</code> and will soon have <code class="sourceCode cpp">views<span class="op">::</span>to_input</code>, it’s trivial to build the first two options from the third, if so desired. It is hard to build the last option from the remainder.</p>
<h1 data-number="3" style="border-bottom:1px solid #cccccc" id="mutating-the-underlying-range"><span class="header-section-number">3</span> Mutating the underlying range<a href="#mutating-the-underlying-range" class="self-link"></a></h1>
<div class="quote">
<p>View adaptors are lazy algorithms.</p>
<p>— Eric Niebler (slightly paraphrased)</p>
</div>
<p>A number of allegedly problematic examples in <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span> involve various forms of mutating the underlying container while a <code class="sourceCode cpp">filter_view</code> refers to it and attempting to use the view afterwards.</p>
<p>Once we realize that range adaptors are lazy algorithms, the problem with such examples becomes obvious: they are equivalent to mutating a container while iterating over it. That’s generally a bad idea when the algorithm is eager. It’s not made less bad just because the algorithm is lazy.</p>
<p>Formally, such mutations are forbidden by the requirement that <code class="sourceCode cpp">ranges<span class="op">::</span>begin</code> must be equality-preserving, non-modifying<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, and stable when applied to forward (or stronger) ranges – as long as the <code class="sourceCode cpp">filter_view</code> exists, messing with the underlying container is a violation of the semantic requirements on <code class="sourceCode cpp">range</code>, caching or not. But why let that stop the paper?</p>
<h1 data-number="4" style="border-bottom:1px solid #cccccc" id="const-iteration-and-deep-const"><span class="header-section-number">4</span> <code class="sourceCode cpp"><span class="kw">const</span></code>-iteration and deep <code class="sourceCode cpp"><span class="kw">const</span></code><a href="#const-iteration-and-deep-const" class="self-link"></a></h1>
<div class="quote">
<p>View adaptors are lazy algorithms, and some algorithms have mutable state.</p>
<p>— Eric Niebler (slightly paraphrased)</p>
</div>
<p>As has been repeatedly explained, there is a wide variety of views that <em>must</em> maintain mutable state somewhere. <code class="sourceCode cpp">generator</code>. <code class="sourceCode cpp">istream_view</code>. <code class="sourceCode cpp">join</code> when joining a range of prvalues or an input range. <code class="sourceCode cpp">chunk</code> when chunking an input range. The list goes on.</p>
<p>Unless we are prepared to remove them all – and reject all future adaptors like them – an arbitrary range will never be uniformly const-iterable.</p>
<p>Nor will it be uniformly deep-<code class="sourceCode cpp"><span class="kw">const</span></code>. That ship sailed with <code class="sourceCode cpp">boost<span class="op">::</span>iterator_range</code>, a long time ago. And for copyable views in particular, deep-<code class="sourceCode cpp"><span class="kw">const</span></code> is illusory anyway.</p>
<p>See also <span class="citation" data-cites="P3431R0">[<a href="#ref-P3431R0" role="doc-biblioref">P3431R0</a>]</span>.</p>
<h1 data-number="5" style="border-bottom:1px solid #cccccc" id="why-doesnt-filter-cache-end"><span class="header-section-number">5</span> Why doesn’t <code class="sourceCode cpp">filter</code> “cache <code class="sourceCode cpp">end</code>”?<a href="#why-doesnt-filter-cache-end" class="self-link"></a></h1>
<p>Well, it has no need to. Its <code class="sourceCode cpp">end</code> is a wrapper around the underlying range’s <code class="sourceCode cpp">end</code>. In a lot of cases you can’t do better anyway: if the range isn’t bidirectional, or isn’t common, you can’t go back from the end, so short of walking through the whole range there’s not much that can be done.</p>
<p>But <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span>’s “cache <code class="sourceCode cpp">end</code>” is something else: it suggests caching the position in the original range that is immediately past the last element. Why not do that, it asks triumphantly, if you care about performance?</p>
<p>Because often it is not necessary to iterate over every element in a range. And when it’s not, calculating that position is a total waste of time. That’s why not every algorithm in the standard library returns the end of its source range: often it’s not necessary to reach the end.</p>
<h1 data-number="6" style="border-bottom:1px solid #cccccc" id="complexity-requirement-of-begin"><span class="header-section-number">6</span> Complexity requirement of <code class="sourceCode cpp">begin</code><a href="#complexity-requirement-of-begin" class="self-link"></a></h1>
<p>The greatest mischief of <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span>, however, is not its proposal to “heal”<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <code class="sourceCode cpp">filter_view</code>, but its cavalierly proposed modification to the semantic requirements on <code class="sourceCode cpp">range</code>. Some might call it…audacious.</p>
<p>The <code class="sourceCode cpp">range</code> concept requires <code class="sourceCode cpp">begin</code> and <code class="sourceCode cpp">end</code> to be amortized constant time. Here, “amortized” means that every call after the first is constant. In cases where <code class="sourceCode cpp">begin</code> or <code class="sourceCode cpp">end</code> cannot be computed in constant time (like <code class="sourceCode cpp">filter</code>’s <code class="sourceCode cpp">begin</code>), then, this requires caching the position.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> The reason behind this design decision – which had been <a href="https://github.com/ericniebler/range-v3/issues/254">debated at length</a> <a href="https://github.com/ericniebler/range-v3/issues/385">over the span of several years</a> prior to standardization – is that it is not uncommon for range adaptors, and generic code in general, to call <code class="sourceCode cpp">begin</code> and <code class="sourceCode cpp">end</code> repeatedly, on the assumption that such calls are cheap. Having such calls perform a linear-time search each time can potentially turn a linear time algorithm into a quadratic one.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>Unfortunately, this design decision attracted the attention of <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span> like the red cape in a bullfight, and its proposed change – allowing linear-time for <code class="sourceCode cpp">begin</code> – is fittingly not unlike a bull in a china shop.</p>
<p>The paper doesn’t even attempt to discuss the extent of breakage caused by this change. What breaks? Well, everything. The entire programming model changes. User code that had assumed that <code class="sourceCode cpp">begin</code> can be called multiple times cheaply can now silently incur a significant cost – and has to do its own caching (which is actually tricky to do correctly) to get back the performance it lost.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> But we don’t even need to go that far – there are plenty of examples in the standard library. I’m not going to attempt to do a comprehensive survey (that’s the paper author’s responsibility), but consider, for instance:</p>
<ul>
<li><code class="sourceCode cpp">ranges<span class="op">::</span>size</code>, which can compute <code class="sourceCode cpp">end<span class="op">()</span> <span class="op">-</span> begin<span class="op">()</span></code> in some cases.</li>
<li><code class="sourceCode cpp">view_interface<span class="op">::</span><span class="kw">operator</span><span class="op">[]</span></code>, which does <code class="sourceCode cpp">begin<span class="op">()[</span>n<span class="op">]</span></code>.</li>
<li><code class="sourceCode cpp">join_view<span class="op">::</span>iterator<span class="op">::</span><span class="kw">operator</span><span class="op">--</span></code>, which needs to know whether it’s at the beginning of the current range.</li>
</ul>
<p>And what’s the deployment experience of this change to the most fundamental concept of the ranges library? The paper doesn’t say. Surely not just the github repo with a small handful of the simplest views and a paltry 63 stars<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, despite the author’s attempts to promote it at multiple conferences over several years?</p>
<h1 data-number="7" style="border-bottom:1px solid #cccccc" id="a-postscript-on-chairs-and-sea-lions"><span class="header-section-number">7</span> A postscript: on chairs and <a href="https://en.wikipedia.org/wiki/Sealioning">sea lions</a><a href="#a-postscript-on-chairs-and-sea-lions" class="self-link"></a></h1>
<div class="quote">
<p>Time is a flat circle. Everything we have ever done or will do, we are going to do over and over and over again – forever.</p>
<p>— Rust Cohle, in True Detective</p>
</div>
<p>It is hard to believe that we are still relitigating design decisions embodied in the most fundamental concept of the entire ranges library <em>five years after</em> we shipped it in an international standard. This design space was exhaustively explored by the original authors of the ranges library before we standardized it, and again after that in the various forums of WG21.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> There is no new information coming in that would justify such an exercise.</p>
<p>Yet here we are.</p>
<p>On the basis of a paper whose exploration of the consequences of its proposed changes is so inadequate that calling it unbaked would be an insult to the ready-to-bake products available in supermarkets everywhere.</p>
<p>It is, of course, the chair’s prerogative to choose what paper is discussed. But I will certainly take that into account in deciding which room I would rather spend my time in.</p>
<h1 data-number="8" style="border-bottom:1px solid #cccccc" id="bibliography"><span class="header-section-number">8</span> References<a href="#bibliography" class="self-link"></a></h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-P2017R1">
<p>[P2017R1] Barry Revzin. 2020-02-19. Conditionally borrowed ranges. <br />
<a href="https://wg21.link/p2017r1">https://wg21.link/p2017r1</a></p>
</div>
<div id="ref-P2210R2">
<p>[P2210R2] Barry Revzin. 2021-03-05. Superior String Splitting. <br />
<a href="https://wg21.link/p2210r2">https://wg21.link/p2210r2</a></p>
</div>
<div id="ref-P2325R3">
<p>[P2325R3] Barry Revzin. 2021-05-14. Views should not be required to be default constructible. <br />
<a href="https://wg21.link/p2325r3">https://wg21.link/p2325r3</a></p>
</div>
<div id="ref-P2328R1">
<p>[P2328R1] Tim Song. 2021-05-08. join_view should join all views of ranges. <br />
<a href="https://wg21.link/p2328r1">https://wg21.link/p2328r1</a></p>
</div>
<div id="ref-P2415R2">
<p>[P2415R2] Barry Revzin, Tim Song. 2021-10-15. What is a view? <br />
<a href="https://wg21.link/p2415r2">https://wg21.link/p2415r2</a></p>
</div>
<div id="ref-P2432R1">
<p>[P2432R1] Nicolai Josuttis. 2021-09-24. Fix istream_view, Rev 1. <br />
<a href="https://wg21.link/p2432r1">https://wg21.link/p2432r1</a></p>
</div>
<div id="ref-P2602R2">
<p>[P2602R2] Barry Revzin. 2022-11-07. Poison Pills are Too Toxic. <br />
<a href="https://wg21.link/p2602r2">https://wg21.link/p2602r2</a></p>
</div>
<div id="ref-P2609R3">
<p>[P2609R3] John Eivind Helset. 2023-02-10. Relaxing Ranges Just A Smidge. <br />
<a href="https://wg21.link/p2609r3">https://wg21.link/p2609r3</a></p>
</div>
<div id="ref-P2997R1">
<p>[P2997R1] Barry Revzin, Tim Song. 2024-03-22. Removing the common reference requirement from the indirectly invocable concepts. <br />
<a href="https://wg21.link/p2997r1">https://wg21.link/p2997r1</a></p>
</div>
<div id="ref-P3329R0">
<p>[P3329R0] Nicolai Josuttis. 2024-11-13. Healing the C++ Filter View. <br />
<a href="https://wg21.link/p3329r0">https://wg21.link/p3329r0</a></p>
</div>
<div id="ref-P3431R0">
<p>[P3431R0] Jonathan Müller. 2025-01-13. Deprecate const-qualifier on begin/end of views. <br />
<a href="https://wg21.link/p3431r0">https://wg21.link/p3431r0</a></p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Far from the first one.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>Incidentally, <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span> also totally misunderstands what “non-modifying” means in this context (and even does so in <span class="red">red text</span> as if it’s a gotcha of some sort). It means the call expression does not “modify” its inputs, as that term is defined in <span>18.2 <a href="https://eel.is/c++draft/concepts.equality">[concepts.equality]</a></span>. But there’s no rule that you have to understand what is being changed before proposing changes.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>More like maim. Perhaps an <a href="https://hearthstone.wiki.gg/wiki/Auchenai_Soulpriest">Auchenai Soulpriest</a> is in play?<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>If it is allowed to be called multiple times, that is. <code class="sourceCode cpp">begin</code> can only be called once on non-forward ranges.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>Ironically, this is an attempt to make views behave more like containers. <span class="citation" data-cites="P3329R0">[<a href="#ref-P3329R0" role="doc-biblioref">P3329R0</a>]</span> repeatedly complains that views are not like containers in various aspects, yet where the library actually tries to make them more similar where it can, it attracted even more vehement complaints. No good deed goes unpunished, I suppose.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>It’s not that simple, either, because you don’t want to pay the caching cost when adapting a range that <em>does</em> have constant-time <code class="sourceCode cpp">begin</code>. So we’d need a whole new set of concepts and opt-ins for this to work well. And there isn’t even the faintest hint of this in the paper.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>As of 2025-02-03. By comparison, range-v3 has 4176 stars.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p>Including more than ten reflector threads since 2022, all originating from the same individual.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</div>
</div>
</body>
</html>
